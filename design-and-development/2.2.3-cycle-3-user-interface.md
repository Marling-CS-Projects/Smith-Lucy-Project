# 2.2.3 Cycle 3: User Interface

## Design

Now that I have programed the foundations of my solution, data collection and storage, in this cycle I will begin developing the user interface for my weather monitoring application. Once this stage is complete, I will then be able to move on to displaying the data I have collected, monitoring trends over time, and weather prediction.

In this cycle I will design and develop a basic web app that is capable of displaying weather data.&#x20;

### Objectives

* [x] Setup a basic web app using react js
* [x] Add content to web app
* [x] Format web app
* [ ] Improve usability and test

### Usability Features

In order to meet the needs of the stakeholder, the user interface for my weather app needs to provide the best user experience possible. It must be easy to use and navigate, and should require a minimal input from the user to work correctly. It must be effective at visually presenting any weather data the user wants to access, and must also be able to connect to mongoDB to display data.

### Tests I need to conduct

Although I am eventually going to need to incorporate live data collected from my weather station and documents stored in my database, in this cycle I am going to focus on building a basic user interface that meets the usability requirements of a stakeholder.

| ID  | Task                                      | Description                                                                                                                                                                                                      | Pass Criteria                                                                                                                                                              |
| --- | ----------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 3.1 | Build a basic weather station application | In this section, I will setup a basic web app using react.js as a front-end and node.js as a backend. This will be the foundation of my weather app. The app must also be able to communicate with the database. | I should be able to display text from both the front-end and back-end in the app. I should then be able to connect to mongoDB using node and display this data on the app. |
| 3.2 | Basic user interface                      | In this part of the cycle, I use my user interface design, to build a template for my weather app.                                                                                                               | The user interface should be able to respond to the size of the screen and be accessible from a variety of devices.                                                        |
| 3.3 | App functionality                         | In this section I will focus on adding essential components to my app, including the menu and settings tabs.                                                                                                     | The stakeholder should be able to navigate through to different sections of the app easily.                                                                                |
| 3.4 | Improving usability of the app            | In the final section of this cycle, I will adapt the user interface to make it more accessable and improve usability. E.g. making the app engaging, and making sure each section of the app is functional.       | All sections of the app should work correctly. The app should also be able to deal with errors, such as not connecting with the backend.                                   |

### Data Structures

| Structure name | Structure type   | Description                                                                          |
| -------------- | ---------------- | ------------------------------------------------------------------------------------ |
| router         | Array            | Contains all the routes for the different pages in the app                           |
| MenuData       | Array            | Stores the title, icon, link, and classnames for all the options on the navbar       |
| lastUpdate     | Intager Variable | Designed to store the time at which the app was last updated                         |
| temp           | Intager Variable | Designed to store the current temperature                                            |
| message        | Object           | Stores all the weather data collected from the database, retrieved from the back-end |

### Development

### 3.1

In the first section of this cycle, I am going to build a basic app. I will use react js as a front-end and node js as a back-end. While the front-end will be used to make my user interface, the back-end will be used to communicate with my database and collect the weather data to be displayed on the app. To do this, I will create a request for both the server and main client and display it on a web browser. Then, I will display some of the data collected by the weather station on my app.

#### Setting up a react js app

In this section, I am going to setup the front-end of my app and display text on the app. Firstly, I created a react app and added the following code to the app.js file.

```javascript
function App() {
    return (
        <div className="App">
            <div className="MainContent">
                <h1>Welcome to my weather station app!</h1>
                <p> This is where the data from your weather station will be displayed.</p>
            </div>
        </div>
    )
}
```

As expected, the app displayed the text in the react app.

<figure><img src="../.gitbook/assets/Screenshot 2023-07-04 at 10.23.36.png" alt=""><figcaption></figcaption></figure>

#### Using node js as a back-end

The next stage of my project is to make a node.js back-end which can communicate with the main react app. The react app should be able to access and display data from the node backend. I added to the code below to the server.js file. I used express to create a web server, which I will run on port 8000.

```javascript
// Import libraries
const express = require('express');

// Create express application
const app = express();
const cors = require("cors");

app.use(cors());
app.use(express.json());

// Creates an endpoint for the route /weatherData
app.get('/message', (req, res) =>{
    res.json({ message: "The current temperature is 25 degrees!"})
});

// Server listens for requests on port 8000
app.listen(8000, () => {
    console.log(`Server is running on port 8000.`);
});
```

As expected, this printed the following in the terminal.

<figure><img src="../.gitbook/assets/Screenshot 2023-07-04 at 10.33.52.png" alt=""><figcaption></figcaption></figure>

The message was also displayed in the web server.

<figure><img src="../.gitbook/assets/Screenshot 2023-07-04 at 10.35.31.png" alt=""><figcaption></figcaption></figure>

Now that I have created both a back-end and front-end, I need to connect both aspects of my app together. I added the code below to the app.js program to connect to the back-end and display the message on the react app.

```javascript
// Includes react module
import React, { useState, useEffect } from "react";

function App() {
  const [message, setMessage] = useState("");

  useEffect(() => {
    fetch("http://localhost:8000/message")
      .then((res) => res.json())
      .then((data) => setMessage(data.message));
  }, []);
  

  return (

    <div className="App">

      <div className="MainContent">
        <h1>Welcome to my weather station app!</h1>
        <p> This is where the data from your weather station will be displayed.</p>
        <h1>{message}</h1>
      </div>
    </div>
  );
}

export default App
```

<figure><img src="../.gitbook/assets/Screenshot 2023-07-04 at 10.55.55.png" alt=""><figcaption></figcaption></figure>

The react app was sucessfully able to acess the back-end and display the text on the app as expected. This will be useful later in this cycle when I need to access weather data readings from mongoDB.

#### Collecting data from mongoDB

The final aspect of setting up my app is connecting it to mongoDB, and displaying the data collected on my app.  Firstly, I used the following code to connect to mongoDB. As expected, I recieved the message "Connected to MongoDB" without any errors in the terminal.

```javascript
//Connect to mongoDB
const mongoose = require("mongoose");

const uri = "mongodb+srv://lrosesmith23:<password>@mystation.uoil79h.mongodb.net/?retryWrites=true&w=majority";

connect();

//Function to connect to mongoDB and log results in the console
async function connect(){
    try {
        //Connects to mongoDB
        await mongoose.connect(uri);
        console.log("Connected to MongoDB");
    } catch (error){
        console.error(error);
    }
}
```

<figure><img src="../.gitbook/assets/Screenshot 2023-07-05 at 10.31.02.png" alt=""><figcaption></figcaption></figure>

I added the following lines of code to my program to find and retrieve all the data on weather readings from mongoDB.

```javascript
//Defines the structure and properties of the document
const myDataSchema = new Schema({
    timestamp: Number,
    temp: Number,
    humidity: Number,
    pressure: Number,
    altitude: Number,
    airQual: String,
    lpo_val: Number,
    dust_ratio: Number,
    dust_conc: Number,
    light: Number,
    sound: Number
}, {collection : "weather"});

//Creates model for weather collection
var Weather = mongoose.model('weather', myDataSchema)

//Collects all data in database
var docs = await Weather.find();

//Displays data in the terminal
console.log(docs)
```

However, this resulted in an error that can be seen below.

<figure><img src="../.gitbook/assets/Screenshot 2023-07-05 at 11.55.19.png" alt=""><figcaption></figcaption></figure>

I realised that the issue was that await can only be used in a asynchronous function. After placing the code above in a seperate function, I recieved the data that can be seen below.

<figure><img src="../.gitbook/assets/Screenshot 2023-07-05 at 11.57.55.png" alt=""><figcaption></figcaption></figure>

To make it easier to manage my app back-end, I placed the database program in a seperate module. I placed the code above to a database.js module and added the following code to export the data.

```javascript
module.exports = results
```

I then added the code below to the server.js module. As before, this displayed the documents in the terminal.

```javascript
// Access database module
async function collectData(){
    var myData = await database;
    console.log(myData);
}

collectData();
```

#### Displaying weather data

The final step in this section is to connect the back-end to the react app and display it.

Program in server.js (node back-end)

<pre class="language-javascript"><code class="lang-javascript"><strong>app.get('/weatherData', (req, res) =>{
</strong><strong>    res.json({ weatherData: myData})
</strong>});
</code></pre>

This resulted in the data being displayed on "localhost:8000/weatherData".

<figure><img src="../.gitbook/assets/Screenshot 2023-07-05 at 17.37.23.png" alt=""><figcaption></figcaption></figure>

Program in App.js (react front-end)

```javascript
const [message, setMessage] = useState(""); 
useEffect(() => {
    fetch("http://localhost:8000/weatherData")  
    .then(async (res) => { 
        const data = await res.json();
        setMessage(data);
      })
  }, []);
  
//display on react app
<div className="App">
    <h1>Welcome to my weather station app!</h1>
    <p> This is where the data from your weather station will be displayed.</p>
    
    //Displays raw weather data
    <pre>{JSON.stringify(message, null, 2)}</pre>
</div>
```

<figure><img src="../.gitbook/assets/Screenshot 2023-07-06 at 09.17.45.png" alt=""><figcaption></figcaption></figure>

The image above shows the raw weather data from the database being displayed on my app. This test has now passed.

### 3.2

Before I could start adding components to my react app, I needed to design an outline for the user interface. My graphical user interface must be easy for the user to navigate, and include up-to-date information. However, in this section I am going to use some sample data to simulate what my weather application will look like when building the user interface.

### User interface design:

<figure><img src="../.gitbook/assets/Screenshot 2023-07-31 at 17.31.28.png" alt=""><figcaption></figcaption></figure>

To design my user interface, I separated all the sections out into boxes. I have adapted the user interface above to show how it would work on a different shaped device.

<figure><img src="../.gitbook/assets/Screenshot 2023-07-31 at 17.28.26.png" alt=""><figcaption></figcaption></figure>

The home screen of my app will function as the main display for my weather application. It will display current conditions (including temperature, humidity and pressure) as well as graphs to monitor trends. Additionally, it will display weather predictions, which will be part of a future development cycle. The app will also have a menu containing settings, weather station information and instructions for use. Having a clear set of instructions on how to use and connect my weather station app will help the user understand its basic functions, improving usability for a stakeholder.

Now that I have a clear plan in mind for my user interface, I am going to start building the foundations of the app.

### Building the user interface

In this part of cycle 3, I am going to focus on building up a template user interface for the app I will display weather data on. At this stage, the app will not display any data from the weather station as I am focusing on the usability and functionality of the app. I started by separating my code down into modules - app, home and menu. Within these sections, I have broken down my user interface into its separate components, including the main display, air quality and data readings.&#x20;

The code for the three basic modules in my user interface can be seen below.

```javascript
// APP - App.js

//Imports other modules
import Home from './Home';
import Menu from './Menu';

function App() {
  return (
    //The main content of my app
    <div className="App">
      <div className="content">
          //Adds other modules to webpage
          <Menu/>
          <Home/>
      </div>
    </div> 
  );
}

//Exports code to index.js
export default App;
```

```javascript
// MENU - Menu.js
const Menu = () => {
    return (
        <div className="menu">
            <p>menu</p>
        </div>
    )
}

//Exports code to be used by app.js
export default Menu;
```

```javascript
// HOME PAGE - Home.js

//Imports all the modules shown on home page
import MainDisplay from './MainDisplay';
import AirQuality from './AirQuality';
import DataReading from './DataReadings';
import WeatherPredictions from './WeatherPredictions';
import Graph from './Graph';
import AdditionalStuff from './AdditionalStuff';
import Settings from './Settings';


const Home = () => {
    
    return(
        <div className="homePage">
            
            // The app is separated into two main columns
            <div className="columns">
            
            // Left column contents
            <div className="leftcolumn">
                <MainDisplay />
                <div className="myReadings">
                    <AirQuality/>
                    <DataReading/>
                    <DataReading/>
                    <DataReading/>
                </div>
                <Graph/>
                <Graph/>
                <AdditionalStuff/>
            </div>

            // Right column contents
            <div className="right column">
                <Settings/>
                <WeatherPredictions /> 
                <div className="otherReadings">
                    <DataReading/>
                    <DataReading/>
                    <DataReading/>
                </div>
                <Graph/>
            </div>
            
            </div>
            
        </div>
    );
}

// Exports code to be used by app.js
export default Home;

```

After adding these individual modules to my app, I ran the program, resulting in the webpage shown below.&#x20;

<figure><img src="../.gitbook/assets/Screenshot 2023-07-20 at 09.27.25.png" alt=""><figcaption></figcaption></figure>

The image above shows the basic structure of my react app. Within the main display, I will show the temperature, current air conditions, and when the app was last updated. All the components in my app will be separated into two separate columns when on a wide screen, and a single longer column when on a smaller screen (as shown by my [user interface design](2.2.3-cycle-3-user-interface.md#user-interface-design)). As I was able to successfully form the foundations of my app, this test has passed.

#### Adding style to my app

The next stage to building my user interface is adding style to improve usability for the stakeholder. The code below shows my index.css file.

```css
.App {
    margin: 10px
}

.mainDisplay {
    color:rgb(1, 0, 2);
    background-color: rgb(246, 242, 242);
    display: grid;
    grid-template-columns: 1fr 1fr;
    grid-gap: 10px;
    
    padding-bottom: 20px;
    padding-left: 10px;
    
}
.mainDisplayContent {
    text-align: center;
}
.settingsButton {
    text-align: center;
    font-size: 20px;
    background-color: rgb(180, 178, 178);
}
.settings {
    margin:0px;
    padding-bottom: 10px;

}
.homePage {
    background-color: white;
}

.airQuality {
    background-color:rgb(246, 242, 242);
}

.dataReadings {
    background-color:rgb(246, 242, 242);
}

.temperature {
    min-width: 200px;
    font-size: 50px;
    padding-top: 1px;
    padding-bottom: 1px;
    background-color: rgb(180, 178, 178);
}
.rightColumn {
    margin:0
}
.weatherConditions {
    text-align: center;
    font-size: 30px;
    background-color: rgb(180, 178, 178);
    min-width: 150px;
}
.weatherPredictions {
    background-color:rgb(246, 242, 242);
    text-align: center;
    font-size: 30px;
    padding-bottom: 300px;
    margin-bottom: 10px;
    padding-top: 20px;
}


.myReadings {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr 1fr;
    grid-gap: 10px;
    margin-top: 10px;
    text-align: center;
    
}

.airQuality {
    padding:20px;
}

.dataReadings {
    padding:20px;
}

.graph {
    background-color: rgb(246, 242, 242);
    padding: 20px;
    margin-top: 10px;
    height: 20%;

}

.additionalStuff{
    margin-top: 10px;
    background-color: rgb(246, 242, 242);
    padding-left: 20px;
    padding-right: 20px;
    padding-top: 40px;
    padding-bottom: 40px;
}

.otherReadings {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    grid-gap: 10px;

}

.menu {
    background-color: rgb(180, 178, 178);
    padding:1px;
    margin-bottom:10px;
    height: 124%;
    
}
```

By formatting my user interface, it will allow me to visualise the layout and the further changes that will need to be made in the future. Additionally, I will later adapt the style of my app to further improve its navigation and engagement with the user.

<figure><img src="../.gitbook/assets/Screenshot 2023-07-20 at 09.38.25.png" alt=""><figcaption></figcaption></figure>

<figure><img src="../.gitbook/assets/Screenshot 2023-07-20 at 09.38.40.png" alt=""><figcaption></figcaption></figure>

#### Making the app responsive

Now that I have built the foundations of my user interface, the next stage is to improve its performance. So that my app is accessable by a variety of devices, I am going to use two columns when the width of the screen is over 800px. Otherwise, I will use a single column. I added the following code to index.css.

```css
/* responsive web design

Style when using a wide screen > 800px */
@media (min-width: 800px) {
    .content{
        display : grid;
        grid-template-columns: 1fr 15fr;
        grid-gap: 10px
    }
    .weatherPredictions{
        margin-top:0px;
    }
    .columns {
        display: grid;
        grid-template-columns: 2fr 1fr;
        grid-gap: 10px;
    }
    .temperature{
        margin-left: 5px;
        margin-right: 5px;
    }
    .weatherConditions{
        margin: auto;
        max-width: 5000px;
    }
    .settingsButton{
        margin-left: auto;
        padding-left: 10px;
        padding-right: 10px;
        margin-top: 0px;
    }
}

/* Style when using a small screen < 800 px */
@media (max-width: 850px) {
    .temperature {
        max-width: 200px;
        margin:auto;
    }
    .weatherConditions {
        max-width: 200px;
        margin:auto;
        padding-top: 1px;
        padding-bottom: 1px;
    }
    .settingsButton {
        margin-left: auto;
        padding-left: 10px;
        padding-right: 10px;
        margin-top: 0px;
        
    }
    .weatherPredictions{
        margin-top: 10px;
    }
}
```

The results of this can be seen below.

<figure><img src="../.gitbook/assets/Screenshot 2023-07-20 at 09.50.17.png" alt=""><figcaption><p>Screen width greater than 800px</p></figcaption></figure>

<figure><img src="../.gitbook/assets/Screenshot 2023-07-20 at 09.54.23.png" alt=""><figcaption><p>Screen width less than 800px</p></figcaption></figure>

By changing the width of the device screen, I was successfully able to switch between the 1 and 2 column view. However, the minimum width of the screen had to be 520px for the app to be displayed correctly. Therefore, further adjustments must be made to make it accessable to other smaller devices, such as smartphones.

To resolve this, I altered my code so that it would alter the grid layout below 520px.

````css
```css
@media (min-width: 800px) {
    .content{
        display : grid;
        grid-template-columns: 1fr 15fr;
        grid-gap: 10px
    }
    
    .weatherPredictions{
        margin-top:0px;
    }
    .columns {
        display: grid;
        grid-template-columns: 2fr 1fr;
        grid-gap: 10px;
    }
    .temperature{
        margin-left: 5px;
        margin-right: 5px;
    }
    .weatherConditions{
        margin: auto;
        max-width: 5000px;
    }
    .settingsButton{
        margin-left: auto;
        padding-left: 10px;
        padding-right: 10px;
        margin-top: 0px;
    }
    .mainDisplay{
        display: grid;
        grid-template-columns: 1fr 1fr;
        grid-gap: 10px;
    }
    .myReadings{
        display: grid;
        grid-template-columns: 1fr 1fr 1fr 1fr;
        grid-gap: 10px;
    }
    .otherReadings {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        grid-gap: 10px;
    
    }
}
@media (max-width: 850px) and (min-width: 520px) {
    .temperature {
        max-width: 200px;
        margin:auto;
    }
    .weatherConditions {
        max-width: 200px;
        
        margin:auto;
        padding-top: 1px;
        padding-bottom: 1px;
    }
    .settingsButton {
        margin-left: auto;
        padding-left: 10px;
        padding-right: 10px;
        margin-top: 0px;
        
    }
    .weatherPredictions{
        margin-top: 10px;
    }
    .mainDisplay{
        display: grid;
        grid-template-columns: 1fr 1fr;
        grid-gap: 10px;
    }
    .myReadings {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr 1fr;
        grid-gap: 10px;
    }
    .otherReadings {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        grid-gap: 10px;
    
    }
}

@media (max-width: 520px) and (min-width: 360px) {
    .mainDisplay{
        padding-right:10px;
    }
    .myReadings{
        display: grid;
        grid-template-columns: 1fr 1fr;
        grid-gap: 10px;
    }
    .otherReadings {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        grid-gap: 10px;
    
    }
}

@media (max-width:360px) {
    .mainDisplay{
        padding-right:10px;
    }
    .myReadings{
        display: grid;
        grid-template-columns: 1fr 1fr;
        grid-gap: 10px;
    }
    .otherReadings{
        margin-top: 10px;
        margin-bottom:10px;
    }
    .dataReadings{
        margin-top: 10px;
        margin-bottom:10px;
    }
    .airQuality{
        margin-top: 10px;
        margin-bottom:10px;
    }
}
```
````

According to (https://accessally.com/, 2023), the smallest smartphone screen size that is actively in use is the iphone 5, which is 320 pixels wide. Therefore, I must alter the layout to ensure that the app is usable on this device. The image below shows how the altered program allows the app to respond to the size of the screen. This test has now passed.

<figure><img src="../.gitbook/assets/Screenshot 2023-07-23 at 22.53.41.png" alt=""><figcaption></figcaption></figure>

### 3.3

In this part of the cycle, I am going to focus on the other sections of my weather app. This will include a page for settings, readings history, user instructions and the menu bar.

### Adding multiple routes

In order to have a multi-page app, I first need to create routes for each page. I will have five separate pages on my app in total.

* **Home page** - This acts as the main display for the weather station. This includes current conditions, such as humidity temperature and pressure, weather predictions, and graphs to show data trends.
* **About page** - This page will give the user some basic information about their weather station, including whether it is able to connect to the app, when weather data was last recieved and when it was first activated.
* **History page** - This will allow the user to access the 'raw data' collected from by the weather station.&#x20;
* **Help page** - This will contain all the user instructions. It will inform them both how to setup the weather station, and to make the best use of this app.
* **Settings page** - This will allow the user to change their pereferences within the app (e.g. the graph and display) and the weather station (e.g. the frequency of readings)

The code below was added below to the index.js file to create five seperate routes for the app.

```javascript
import {
  createBrowserRouter,
  RouteProvider,
  Router,
  RouterProvider,
} from "react-router-dom";

//Creates different routes/pages for my app
const router = createBrowserRouter([
  //Home page (default)
  {
    path: "/",
    element: <App/>
  },
  //About page
  {
    path: "about",
    element: <AboutPage/>
  },
  //Settings page
  {
    path: "settings",
    element: <SettingsPage/>
  },
  //History page
  {
    path: "history",
    element: <HistoryPage/>
  },
  //Help page
  {
    path: "help",
    element: <HelpPage/>
  }
]);

const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(
  <div className='content'><Menu/><RouterProvider router={router}/></div>
);
```

### Menu bar

Now that I have created four extra pages, the user needs to be able to navigate between them. Therefore, I will focus on creating a menu bar that is both functional and responsive. The diagram below demonstrates how the navigation menu will apprear on a wide screen.

<figure><img src="../.gitbook/assets/Screenshot 2023-08-01 at 11.01.59.png" alt=""><figcaption><p>UI design - home screen with menu bar</p></figcaption></figure>

In a new MenuData.js file, I imported the icons for my user interface menu and exported the data for each menu item in the form of an array. The code for this can be seen below.

```javascript
import React from "react";

//Importing the icons for menu
import { BsFillHouseFill } from 'react-icons/bs'
import { GiSettingsKnobs } from 'react-icons/gi'
import { LuHistory } from 'react-icons/lu'
import { BsFillQuestionCircleFill } from 'react-icons/bs'
import { IoMdSettings } from 'react-icons/io'

//Menu data
export const MenuData = [
    {   
        //Title of the link
        title: "Home",
        //Icon
        icon: <BsFillHouseFill />,
        //Link
        link: "/",
        //Class name
        cName: "menuIcon homeIcon"
    },
    {
        title: "About",
        icon: <GiSettingsKnobs />,
        link: "/about",
        cName: "menuIcon aboutIcon"
    },
    {
        title: "History",
        icon: <LuHistory />,
        link: "/history",
        cName: "menuIcon historyIcon"
    },
    {
        title: "Help",
        icon: <BsFillQuestionCircleFill />,
        link: "/help",
        cName: "menuIcon helpIcon"
    },
    {
        title: "Settings",
        icon: <IoMdSettings />,
        link: "/settings",
        cName: "menuIcon settingsIcon"
    }
]
```

I then added the following code to menu.js to map out the data for the navbar.

```javascript
import React from "react";
import { MenuData } from "./MenuData";

const Menu = () => {
    return (
        <div className="navbar">
            //Unordered list of links
            <ul>
            //Maps out each menu option
            {MenuData.map((val,key)=>{
                return(
                    //List item
                    <li className={val.cName} key={key} onClick={() => {window.location.pathname = val.link}}> 
                        <div>{val.icon}</div>
                    </li>

                )
            })}
            </ul>
        </div>
    )
}
export default Menu;
```

<figure><img src="../.gitbook/assets/Screenshot 2023-08-02 at 18.53.05.png" alt=""><figcaption></figcaption></figure>

As can be seen above, I was sucessfully able to navigate between pages using the menu bar. I then added the following to index.css to improve its usability.

```css
ul {
    list-style-type: none;
    text-align: center;
    padding-left:0px;
}

.homeIcon {
    color: white;
    font-size: 40px;
}
.aboutIcon {
    color: white;
    font-size: 40px;
}
.historyIcon {
    color: white;
    font-size: 40px;
}
.helpIcon {
    color: white;
    font-size: 40px;
}
.settingsIcon {
    color: white;
    font-size: 45px;
    position: fixed;
    bottom: 10px;
    width: 80px
}

.menuIcon.settingsIcon svg {
    margin-top: -3px;
}

.menuIcon {
    margin-top: 5px;
    margin-bottom: 5px;
    padding-top: 10px;
    padding-bottom: 10px;
}

.menuIcon svg {
    vertical-align: middle;
    margin-top: 5px;
    margin-bottom: 5px;
}

.menuIcon div {
    height: 55px;
    vertical-align: middle;
}

.menuIcon:hover{
    cursor: pointer;
    background-color: white;
}

.menuIcon:hover svg {
    color: rgb(180, 178, 178);
}
```

### About Your Weather Station

<figure><img src="../.gitbook/assets/Screenshot 2023-08-01 at 11.03.29.png" alt=""><figcaption><p>UI design - About Your Weather Station</p></figcaption></figure>

I created a template for the about page using the code below. As well as giving the user some basic infomation about the weather station, it will also inform the user whether the connection is succesful, when data was last recieved and when the weather station was first activated. It also contains a link to the settings page.

```javascript
const AboutPage = () => {

    //The values of these variables will change depending on the connection with the weather station
    let connection_status = "SUCCESSFUL";
    let last_recieved = "22/22/2023 at 17:00"
    let activated = "01/01/2020"


    return(
        <div className="aboutPage">
            <div className="pageContent">
                <h1 className="aboutTitle">About Your Weather Station</h1>
                <br></br>
                <div className="aboutText"><p>Information about your weather station....</p></div>
                <div className="aboutInfo">
                    <p>Connection Status - <b>{connection_status}</b></p> 
                    <p>Weather data last recieved - <b>{last_recieved}</b></p>
                    <p>Weather station first activated - <b>{activated}</b></p>
                </div>
                <br/>
                <p className="settingsLink">To change your weather station preferences, go to <a onClick={() => {window.location.pathname = "/settings"}}>settings</a></p>
                <br/>
            </div>
        </div>
    );
}
export default AboutPage;
```

<figure><img src="../.gitbook/assets/Screenshot 2023-08-02 at 17.34.01.png" alt=""><figcaption></figcaption></figure>

### History of readings

<figure><img src="../.gitbook/assets/Screenshot 2023-08-02 at 18.57.56.png" alt=""><figcaption><p>UI design - Weather History</p></figcaption></figure>

The next section of my app will display a log of all the data readings taken by the weather station. This will allow the user to manually compare readings over time if they do not wish to use the main display on the home page.&#x20;

#### Displaying all readings

As in section [3.1](2.2.3-cycle-3-user-interface.md#displaying-weather-data), I started by displaying all the data readings in the JSON format, using the code below.&#x20;

```javascript
import React, { useState, useEffect } from "react";


const HistoryPage = () => {
    
    //Connects to backend
    const [message, setMessage] = useState(""); 
    useEffect(() => {
        fetch("http://localhost:8000/weatherData")  
        .then(async (res) => { 
        const data = await res.json();
        setMessage(data);
      })
  }, []);

  
    return(
        <div className="historyPage">
            <div className="pageContent">
                <h1 class="historyTitle">Readings History</h1>

                <pre>{JSON.stringify(message, null, 2)}</pre>
            </div>
        </div>
    );
}
export default HistoryPage;
```

<figure><img src="../.gitbook/assets/Screenshot 2023-08-02 at 18.37.08.png" alt=""><figcaption></figcaption></figure>

As expected, this displayed all the readings from the database onto the page. However, this format is difficult for a user to understand, and contains the timestamp and id, which would not be useful to them in this form. To resolve this, I used the Date() function to convert the time stamp to a date and time. I then spit the timestamp and data values up in a basic table. The code for this can be seen below.

```javascript
import React, { useState, useEffect } from "react";


const HistoryPage = () => {
    
    //Connects to backend
    const [message, setMessage] = useState(""); 
    useEffect(() => {
        fetch("http://localhost:8000/weatherData")  
        .then(async (res) => { 
        const data = await res.json();
        setMessage(data);
      })
    }, []);

    return(
        <div className="historyPage">
            <div className="pageContent">
                <h1 class="historyTitle">Weather History</h1>
                
                <div className="historyText">
                    <p className="PageLink">Welcome to Weather History! Here, you can find a log of all the data readings from your weather station. Want a more visual way of monitoring weather conditions? Check out the <a onClick={() => {window.location.pathname = "/"}}>main display</a>! </p>
                </div>
                <div>
                    <br/>
                    //Maps out component for each item in the weather data array
                    { message?.weatherData?.map((item) => {
                        return (
                            <div className="weatherReadings">
                                //Converts the timestamp into a date and time
                                <div className="timestamp">
                                    <div>{new Date(item.timestamp*1000).toDateString()}</div>
                                    <br></br>
                                    <div>{new Date(item.timestamp*1000).toTimeString()}</div>
                    
                                </div>
                                //Displays the value for each of the following items in the array
                                <div className="dataContent">
                                    <div>Temperature: {item.temp}</div>
                                    <div>Humidity: {item.humidity}</div>
                                    <div>Pressure: {item.pressure}</div>
                                    <div>Altitude: {item.altitude}</div>
                                    <div>Air Quality: {item.airQual}</div>
                                    <div>Dust Concentration: {item.dust_conc}</div>
                                    <div>Light: {item.light}</div>
                                    <div>Sound: {item.sound}</div>

                                </div>
                            </div>
                        )
                    }) }
                </div>
            </div>
        </div>
    );
}
export default HistoryPage;
```

<figure><img src="../.gitbook/assets/Screenshot 2023-08-03 at 08.54.57.png" alt=""><figcaption></figcaption></figure>

While this method of displaying weather data is much clearer, to allow the user to easily compare data readings, I decided to change it into a table above a certain screen width. I did this using the following code.

```javascript
import React, { useState, useEffect } from "react";


const HistoryPage = () => {
    
    //Connects to backend
    const [message, setMessage] = useState(""); 
    useEffect(() => {
        fetch("http://localhost:8000/weatherData")  
        .then(async (res) => { 
        const data = await res.json();
        setMessage(data);
      })
    }, []);

    return(
        <div className="historyPage">
            <div className="pageContent">
                <h1 class="historyTitle">Weather History</h1>
                <div className="historyText">
                    <p className="PageLink">Welcome to Weather History! Here, you can find a log of all the data readings from your weather station. Want a more visual way of monitoring weather conditions? Check out the <a onClick={() => {window.location.pathname = "/"}}>main display</a>! </p>
                </div>
                <div>
                    <br/>
                    <div className="weatherReadings titles">
                        <div className="timestamp corner">
                            </div>
                        <div className="dataContent">
                        
                            <div className="dataColumn">Temperature</div>
                            <div className="dataColumn">Humidity</div>
                            <div className="dataColumn">Pressure</div>
                            <div className="dataColumn">Altitude</div>
                            <div className="dataColumn">Air Quality</div>
                            <div className="dataColumn">Dust Conc</div>
                            <div className="dataColumn">Light</div>
                            <div className="dataColumn">Sound</div>
                        </div>
                    </div>
                    
                    { message?.weatherData?.map((item) => {
                        return (
                            <div className="weatherReadings">
                                <div className="timestamp readings">
                                    <div className="timestamp-container">
                                        <div>{new Date(item.timestamp*1000).toDateString()}</div>
                                        <br></br>
                                        <div>{new Date(item.timestamp*1000).toTimeString()}</div>
                                    </div>
                                </div>
                                <div className="dataContent">
                                    <div className="dataColumn"><div className="tag">Temperature:&nbsp;</div>{item.temp}</div>
                                    <div className="dataColumn"><div className="tag">Humidity:&nbsp;</div>{item.humidity}</div>
                                    <div className="dataColumn"><div className="tag">Pressure:&nbsp;</div>{item.pressure}</div>
                                    <div className="dataColumn"><div className="tag">Altitude:&nbsp;</div>{item.altitude}</div>
                                    <div className="dataColumn"><div className="tag">Air Quality:&nbsp;</div>{item.airQual}</div>
                                    <div className="dataColumn"><div className="tag">Dust Concentration:&nbsp;</div>{item.dust_conc}</div>
                                    <div className="dataColumn"><div className="tag">Light:&nbsp;</div>{item.light}</div>
                                    <div className="dataColumn"><div className="tag">Sound:&nbsp;</div>{item.sound}</div>

                                </div>
                            </div>
                        )
                    }) }
                </div>
            </div>
        </div>
    );
}
export default HistoryPage;
```

```css
.timestamp.readings{
    background-color: rgb(180, 178, 178);
    padding:10px;
    text-align: center;
    vertical-align: middle;  
}


@media (max-width: 1232px){
    .weatherReadings {
        display:grid;
        grid-template-columns: 1fr 4fr;
        grid-gap: 10px;
        margin-top:5px;
        margin-bottom: 5px;
        margin-left:50px;
        margin-right:50px;
    }
    .tag{
        float: left;
    }
    .dataContent {
        background-color: lightgrey;
        padding: 10px;
    }
    .weatherReadings.titles {
        background-color: rgb(246, 242, 242);
        display: none;
    }
}

@media (min-width: 1232px){
    .timestamp{
        background-color: rgb(180, 178, 178);
        padding:10px;
        text-align: center;
        vertical-align: middle;
    }
    .tag {
        display: none;
    }
    .weatherReadings.titles{
        color:black;
    }
    .weatherReadings{
        display:grid;
        grid-template-columns: 1fr 4fr;
        grid-gap: 10px;
        margin-top:5px;
        margin-bottom: 5px;
        margin-left:50px;
        margin-right:50px;
        color: black;
    }
    .dataContent {
        padding: 0px;
        display:grid;
        grid-template-columns: repeat(8, minmax(0, 1fr));
        grid-gap: 10px;
    }
    .dataColumn {
        background-color: lightgrey;
        text-align: center;
        padding: 10px;  
    }
    .timestamp .corner{
        background-color: lightblue;
    }
}
.timestamp.readings {
    display: flex;
    flex-direction: column;
    justify-content: center;
}
```

<figure><img src="../.gitbook/assets/Screenshot 2023-08-03 at 10.10.18.png" alt=""><figcaption></figcaption></figure>

As expected, this produced a table containing all the data on the database.&#x20;

### User Instructions

The next page I am going to focus on is user instructions. This is vital to my app's usability, as it will inform the stakeholder how to setup the weather station and use the app.

<figure><img src="../.gitbook/assets/Screenshot 2023-08-01 at 11.07.23.png" alt=""><figcaption><p>UI design - User Instructions</p></figcaption></figure>

```javascript
const HelpPage= () => {
    
    return(
        <div className="helpPage">
            
            <div className="pageContent">
                <div className="aboutAppText">
                    <h2>About this app</h2>
                    <br/>
                    <br/>
                </div>
                <div className="helpColumns">
                    <div className="setUpText">
                        <h2>Setting up your weather station</h2>
                    </div>
                    <div className="howToText">
                        <h2>How to use this app</h2>
                    </div>
                </div>
            </div>
        </div>
    );
}
export default HelpPage;
```

Using the code above, I created a basic template for the help page on my app.

<figure><img src="../.gitbook/assets/Screenshot 2023-08-03 at 10.55.50.png" alt=""><figcaption></figcaption></figure>

### Settings

<figure><img src="../.gitbook/assets/Screenshot 2023-08-01 at 11.09.15.png" alt=""><figcaption><p>UI design - settings</p></figcaption></figure>

The final page in my app is settings. This will allow the user to change their preferences for the app, such as graphs. In this section, I will work on building a basic template for the settings page. I will then add functionality to the page in a future cycle. The code for this page can be seen below.

```javascript
const SettingsPage = () => {
    
    return(
        <div className="settingsPage">
            <div className="mainContent">
            
            <h1>Settings</h1>
            <div className="settingsText"><p>Information about settings...</p></div>
            </div>
            
            
        </div>
    );
}
export default SettingsPage;
```

### 3.4

### Modifying my user interface design

In the final section of this cycle, I am going to focus on improving engagement and usability. As well as making sure the app is functional, this will also include adapting the visual componenets of the app so that it is easy to navigate. I decided to use a blue colour scheme throughout my app, as can be seen below.

<figure><img src="../.gitbook/assets/Screenshot 2023-08-03 at 13.30.07.png" alt=""><figcaption></figcaption></figure>

<figure><img src="../.gitbook/assets/Screenshot 2023-08-03 at 13.30.51.png" alt=""><figcaption></figcaption></figure>

### Weather history



#### Dealing with errors in backend (and no data event)

#### Setting a maximum number of log enteries



### Other content

#### About the weather station

#### User Instructions

## Outcome

Throughout this cycle, I have designed and programed a user interface that uses react as a front-end and node as a back-end. The app has five pages - a home page, about page, settings page, weather history page and a user instructions page.&#x20;

### Testing

| Test | Instructions                                      | What I expect                                                                                                                                                | What actually happens                                                                                                                                                                                             | Pass/Fail |
| ---- | ------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------- |
| 1    | Setup basic app                                   | The app should have a react.js front-end and a node.js back-end, which are able to connect with each other                                                   | The front-end and back-end successfully connected to each other.                                                                                                                                                  | Pass      |
| 2    | Connect to database                               | The back-end should be able to connect to mongoDB and output any data it recieves.                                                                           | The weather data was recieved from mongoDB and displayed in the back-end terminal.                                                                                                                                | Pass      |
| 3    | Display weather data on react app                 | The front-end should recieve weather data from the back-end and display it on the react app in an easily accessible format.                                  | Previous weather data readings were displayed in the form of a log/history on a section of the app. This was in the form of a table instead of the origonal JSON format, so can be easily understood by the user. | Pass      |
| 4    | Make a basic user interface                       | The user interface should have seperate sections to display current readings (e.g. temperature, pressure, humidity), predicted weather forecasts and graphs. | The react app contained seperate sections for each reading taken by the weather station, as well as additional spaces for weather forecasting and monitoring. The UI is responsive to multiple sceen sizes.       | Pass      |
| 5    | Menu connecting multiple app pages                | The menu should connect the app to multiple routes - home, about the weather station, weather data log, user instructions and settings.                      | It is easy for the user to navigate the menu and switch between sections.                                                                                                                                         | Pass      |
| 6    | Ensuring the app is functional and error-tolerant | The app should be able to deal with any errors - such as disconnecting from the back-end server or missing data.                                             |                                                                                                                                                                                                                   |           |

## Reference list

https://accessally.com/. (2023). _Mobile Responsive Screen Sizes_. \[online] Available at: https://accessally.com/blog/mobile-responsive-screen-sizes/#:\~:text=Mobile%20Responsive%20Screen%20Sizes%20Explained\&text=For%20example%2C%20the%20smallest%20cellphone \[Accessed 23 Jul. 2023].

### Evidence
